<?xml version="1.0" encoding="iso-8859-1"?>

<webPage xmlns:concepting="default namespace"
         xmlns:jsp="default namespace"
         xmlns:c="default namespace">
    <set var="actionFormObjectId" value="br.com.concepting.framework.web.form.util.ActionFormUtil.getActionFormObjectIdByModel(#{clazz})"/>
    <set var="actionFormResourceId" value="br.com.concepting.framework.web.form.util.ActionFormUtil.getActionFormResourceIdByModel(#{clazz})"/>
    <set var="actionFormUrl" value="br.com.concepting.framework.web.form.util.ActionFormUtil.getActionFormUrlByModel(#{clazz})"/>
	&lt;%@ page errorPage="/errorPage.jsp"%&gt;
	&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
	&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%&gt;
	&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%&gt;
	&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean"%&gt;
	&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html"%&gt;
	&lt;%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic"%&gt;
	&lt;%@ taglib uri="http://www.concepting.com.br/framework/tags" prefix="concepting"%&gt;

	<concepting:page title="${loginSession.systemModule}">
	    <concepting:form action="@{actionFormUrl}" resourceId="@{actionFormResourceId}">
           	<jsp:include page="/headerPage.jsp"/>
           	<table class="content">
           		<tr>
           			<td align="center">
		           		<table class="panel">
		           			<tr>
		           				<td align="center">
                            		<concepting:guides name="guides" width="225">
                            			<c:choose>
                            				<c:when test="${@{actionFormObjectId}.action == 'loadForgotPassword'}">
                                                <concepting:guide name="forgotPassword">
                                                    <center>
                                                    	<table style="padding: 10px;">
                                                    		<tr>
                                                    			<td>
                                                    				<concepting:label resourceKey="sendForgottenPassword.label"/>
                                                    			</td>
                                                    		</tr>
                                                    	</table>
                                                        <concepting:text name="user.email" size="50" labelPosition="top"/>
                                                        <br/>
                                                        <concepting:confirmButton action="sendForgottenPassword" forward="index" validate="true"/>
                                                        <concepting:backButton forward="index"/>
                                                    </center>
                                                </concepting:guide>
	                            			</c:when>
                            			    <c:when test="${@{actionFormObjectId}.action == 'loadChangeCurrentLanguage'}">
                                                <concepting:guide name="changeLanguage">
                                                    <center>
                                                        <br/>
                                                        <concepting:list name="currentLanguage" labelPosition="top" data="languages" valueMap="languagesMap"/>
                                                        <br/>
                                                        <concepting:confirmButton action="changeCurrentLanguage" forward="index" validate="true"/>
                                                        <concepting:cancelButton action="cancelChangeCurrentLanguage" forward="index"/>
                                                    </center>
                                                </concepting:guide>
	                            			</c:when>
                            				<c:when test="${@{actionFormObjectId}.action == 'loadChangeCurrentSkin'}">
                                                <concepting:guide name="changeSkin">
                                                    <center>
                                                        <br/>
                                                        <concepting:list name="currentSkin" labelPosition="top" data="skins"/>
                                                        <br/>
                                                        <concepting:confirmButton action="changeCurrentSkin" forward="index" validate="true"/>
                                                        <concepting:cancelButton action="cancelChangeCurrentSkin" forward="index"/>
                                                    </center>
                                                </concepting:guide>
	                            			</c:when>
	                            			<c:when test="${@{actionFormObjectId}.action == 'loadChangePassword' || @{actionFormObjectId}.model.user.changePassword}">
                                                <concepting:guide name="changePassword">
                                                    <center>
                                                        <br/>
                                                        <concepting:password name="user.newPassword" size="15" labelPosition="top"/>
                                                        <concepting:password name="user.confirmPassword" size="15" labelPosition="top"/>
                                                        <br/>
                                                        <concepting:confirmButton action="changePassword" messageKey="confirmMessage" forward="index" validate="true"/>
                                                        <concepting:cancelButton action="cancelChangePassword" forward="index"/>
                                                    </center>
                                                </concepting:guide>
	                            			</c:when>
	                            			<c:otherwise>
                                                <concepting:guide name="input">
                                                    <center>
                                                        <br/>
                                                        <concepting:text name="user.name" labelPosition="top"/>
                                                        <concepting:password name="user.password" size="15" labelPosition="top"/>
                                                        <br/>
                                                        <concepting:link name="forgotPassword" onClickAction="loadForgotPassword"/>
                                                        <br/><br/>
                                                        <concepting:confirmButton action="logIn" forward="index" validate="true"/>
                                                        <concepting:undoButton/>
                                                    </center>
                                                </concepting:guide>
	                            			</c:otherwise>
	                            		</c:choose>
	                            	</concepting:guides>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
			<jsp:include page="/footerPage.jsp"/>
		</concepting:form>
	</concepting:page>
</webPage>